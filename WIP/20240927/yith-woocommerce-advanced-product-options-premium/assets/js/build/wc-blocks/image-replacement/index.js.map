{"version":3,"file":"build/wc-blocks/image-replacement/index.js","mappings":"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","sources":["webpack://yith-woocommerce-advanced-product-options-premium/external window [\"wp\",\"plugins\"]","webpack://yith-woocommerce-advanced-product-options-premium/external window [\"wp\",\"data\"]","webpack://yith-woocommerce-advanced-product-options-premium/external window [\"wp\",\"element\"]","webpack://yith-woocommerce-advanced-product-options-premium/external window [\"wc\",\"wcBlocksData\"]","webpack://yith-woocommerce-advanced-product-options-premium/external window [\"wc\",\"blocksCheckout\"]","webpack://yith-woocommerce-advanced-product-options-premium/./includes/wc-blocks/assets/js/image-replacement/index.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"plugins\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wc\"][\"wcBlocksData\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wc\"][\"blocksCheckout\"];","import {registerPlugin} from '@wordpress/plugins';\nimport {useSelect, dispatch} from \"@wordpress/data\";\nimport {useEffect} from \"@wordpress/element\";\nimport {CART_STORE_KEY as storeKey } from '@woocommerce/block-data';\nimport { registerCheckoutFilters } from '@woocommerce/blocks-checkout';\n\nconst render = () => {\n    const cartItems = useSelect( (select) => select( storeKey ).getCartData().items );\n\n    useEffect(() => {\n        setTimeout( function () {\n            if ( cartItems.length > 0 ) {\n\n                // Change product thumbnail.\n                const cartHtml     = document.querySelector('.wc-block-cart .wc-block-cart__main') ||\n                    document.querySelector('.wc-block-cart .wc-block-components-order-summary__content');\n                const checkoutHtml = document.querySelector('.wc-block-checkout .wc-block-components-order-summary');\n\n                const cartElements = {\n                    itemsRow : '.wc-block-cart-items__row',\n                    imageSelector : '.wc-block-cart-item__image a img'\n                };\n                const checkoutElements = {\n                    itemsRow : '.wc-block-components-order-summary-item',\n                    imageSelector : '.wc-block-components-order-summary-item__image img'\n                };\n\n                var elements = null;\n                var elementHtml = null;\n\n                if ( cartHtml !== null ) {\n                    elementHtml = cartHtml;\n                    elements    = cartElements;\n                } else if ( checkoutHtml !== null ) {\n                    elementHtml = checkoutHtml;\n                    elements    = checkoutElements;\n                }\n\n                if ( elements !== null && elementHtml !== null ) {\n\n                    const itemsRow = elementHtml.querySelectorAll( elements.itemsRow );\n                    itemsRow.forEach( (itemRow, indexRow) => {\n                        const imageToReplace = cartItems[indexRow].extensions?.yith_wapo_wc_block_manager.replace_image;\n                        if ( imageToReplace ) {\n                            const cartItemRowImage = itemRow.querySelector( elements.imageSelector );\n                            cartItemRowImage.src   = imageToReplace;\n                        }\n                    } );\n                }\n            }\n        }, 500 );\n    }, [cartItems]);\n}\n\nregisterPlugin( 'yith-wapo-image-replacement', {\n    render,\n    scope: 'woocommerce-checkout',\n} );\n\nconst addEditLink = () => {\n    const cartItems = useSelect( (select) => select( storeKey ).getCartData().items );\n        useEffect( () => {\n            setTimeout( function() {\n\n                if ( cartItems.length > 0 ) {\n\n                    // Change product thumbnail.\n                    const cartHtml = document.querySelector('.wc-block-cart .wc-block-cart__main') ||\n                        document.querySelector('.wc-block-cart .wc-block-components-order-summary__content');\n\n                    const cartElements = {\n                        itemsRow: '.wc-block-cart-items__row',\n                        productMetadata: '.wc-block-components-product-metadata',\n                        itemLink: '.yith-wapo-edit-addons-link'\n                    };\n\n                    var elements = null;\n                    var elementHtml = null;\n\n                    if (cartHtml !== null) {\n                        elementHtml = cartHtml;\n                        elements = cartElements;\n                    }\n\n                    if (elements !== null && elementHtml !== null) {\n                        const itemsRow = elementHtml.querySelectorAll( elements.itemsRow );\n\n                        itemsRow.forEach( (itemRow, indexRow) => {\n\n                            const editLink = cartItems[indexRow].extensions?.yith_wapo_wc_block_manager.edit_link;\n                            const itemLink = itemRow.querySelector(elements.itemLink);\n\n                            if ( editLink && !itemLink ) {\n                                const productMetadataDiv = itemRow.querySelector(elements.productMetadata);\n\n                                productMetadataDiv.innerHTML += editLink;\n                            }\n                        } );\n                    }\n                }\n\n            }, 500 )\n\n        }, [cartItems])\n\n}\n\nregisterPlugin( 'yith-wapo-add-edit-link', {\n    render: addEditLink,\n    scope: 'woocommerce-checkout',\n} );\n\nconst RemoveNameIndividualAddons = ( defaultValue, extensions, args ) => {\n\n    if ( extensions.yith_wapo_wc_block_manager?.is_individual ) {\n        defaultValue = '';\n    }\n\n    return defaultValue;\n};\n\nconst IndividualAddonClass = ( defaultValue, extensions, args ) => {\n\n    if ( extensions.yith_wapo_wc_block_manager?.is_individual ) {\n        defaultValue += 'yith-wapo-is-individual';\n    }\n\n    return defaultValue;\n};\n\nconst RemoveLinkIndividualAddons = ( defaultValue, extensions, args ) => {\n    if ( extensions.yith_wapo_wc_block_manager?.is_individual ) {\n        defaultValue = false;\n    }\n\n    return defaultValue;\n};\n\nregisterCheckoutFilters( 'yith-wapo-individual-addon', {\n    itemName           : RemoveNameIndividualAddons,\n    cartItemClass      : IndividualAddonClass,\n    showRemoveItemLink : RemoveLinkIndividualAddons,\n} );"],"names":["registerPlugin","useSelect","dispatch","useEffect","CART_STORE_KEY","storeKey","registerCheckoutFilters","render","cartItems","select","getCartData","items","setTimeout","length","cartHtml","document","querySelector","checkoutHtml","cartElements","itemsRow","imageSelector","checkoutElements","elements","elementHtml","querySelectorAll","forEach","itemRow","indexRow","_cartItems$indexRow$e","imageToReplace","extensions","yith_wapo_wc_block_manager","replace_image","cartItemRowImage","src","scope","addEditLink","productMetadata","itemLink","_cartItems$indexRow$e2","editLink","edit_link","productMetadataDiv","innerHTML","RemoveNameIndividualAddons","defaultValue","args","_extensions$yith_wapo","is_individual","IndividualAddonClass","_extensions$yith_wapo2","RemoveLinkIndividualAddons","_extensions$yith_wapo3","itemName","cartItemClass","showRemoveItemLink"],"sourceRoot":""}