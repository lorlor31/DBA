jQuery(document).ready(function(p){initColorpicker=function(){var l={color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,target:!1,width:180,palettes:!1,change:function(e,t){let a=p(this).closest(".wp-picker-container"),o=a.find(".wp-picker-input-wrap"),i=a.find(".wp-picker-custom-placeholder"),n=a.find(".wp-picker-default-custom");var d=a.find(".wp-color-picker").data("addon-colorpicker-show"),r=a.find(".wp-color-picker").data("default-color"),c=o.find("input.wp-color-picker"),c=p(c[0]);"placeholder"===d&&(""===t.color.toString()&&"undefined"===t.color.toString()||(o.find(".wp-color-picker").show(),i.hide(),n.show(),i.css("line-height","3.0"))),n.removeClass("default_color"),r!==t.color.toString()&&n.addClass("default_color"),p(document).trigger("wapo-colorpicker-change",c)},clear:function(e,t){let a=p(this).closest(".wp-picker-container"),o=a.find(".wp-picker-input-wrap"),i=a.find(".wp-picker-custom-placeholder"),n=a.find(".wp-picker-default-custom");var d=a.find(".wp-color-picker").data("addon-colorpicker-show"),r=o.find("input.wp-color-picker"),r=p(r[0]);"placeholder"===d&&(o.find(".wp-color-picker").hide(),i.show(),n.hide(),i.css("line-height","0")),p(document).trigger("wapo-colorpicker-clear",r[0])}};function e(){p(".yith-wapo-block .yith-wapo-addon-type-colorpicker .wp-color-picker").each(function(){p(this).wpColorPicker(l);let a=p(this).closest(".wp-picker-container"),e=a.find("button .wp-color-result-text"),t=a.find(".wp-picker-default"),o=a.find(".wp-picker-input-wrap");var i,n=p(this).data("addon-colorpicker-show"),d=p(this).data("addon-placeholder");e.html("");let r=p(this).parents(".wp-picker-container"),c=r.find(".wp-picker-input-wrap");if(r.hasClass("yith-wapo-colorpicker-initialized")||r.addClass("yith-wapo-colorpicker-initialized"),c.find(".wp-picker-default-custom").length||(i=p("<span/>").attr({"class":"wp-picker-default-custom"}),c.find(".wp-picker-default, .wp-picker-clear").wrap(i)),"placeholder"===n){o.find(".wp-color-picker").hide(),o.find(".wp-picker-custom-placeholder").length||((i=p("<span/>").attr({"class":"wp-picker-custom-placeholder"})).html(d),o.find(".screen-reader-text").before(i));let e=a.find(".wp-picker-default-custom"),t=a.find(".wp-picker-custom-placeholder");e.hide(),t.css("line-height","0")}t.trigger("click")})}p(document).on("yith-wapo-after-reload-addons",e),p(document).on("yith-wapo-after-reload-addons",initDatePickers),checkColorPickerOnInput=function(){p(document).on("click",function(e){if(!p(e.target).is(".yith-wapo-colorpicker-container .iris-picker, .yith-wapo-colorpicker-container .iris-picker-inner")){let e=p(".yith-wapo-colorpicker-container .yith-wapo-colorpicker-initialized .wp-color-picker");0<e.length&&e.iris("hide")}}),p(".yith-wapo-colorpicker-container .yith-wapo-colorpicker-initialized .wp-color-picker").click(function(e){p(this).iris("show")})},e(),checkColorPickerOnInput()},initDatePickers=function(){p(".yith-wapo-block .yith_wapo_date.datepicker").each(function(){var e=p(this);initDatePicker(e)})},initTimePicker=function(t){let e=t.data("params"),i=e.time_data||"",a=e.show_time_selector||"";"object"==typeof i&&null!==i&&(i=Object.values(i)),a&&setTimeout(function(){var a,o,e;p("#wapo-datepicker-time").length||(a="",o=t.closest(".date-container").find(".temp-time").text(),p(i).each(function(e,t){a+=t!==o?"<option>"+t+"</option>":"<option selected>"+t+"</option>"}),e='<div id="wapo-datepicker-time"><label>'+yith_wapo.i18n.datepickerSetTime+'</label><select id="wapo-datepicker-time-select">'+a+'</select></div><div id="wapo-datepicker-save"><button>'+yith_wapo.i18n.datepickerSaveButton+"</button></div>",p(e).appendTo("#ui-datepicker-div"))},10)},initDatePicker=function(l){var e=l.data("params"),t="",a="",o=e.start_year||"",i=e.end_year||"",n=e.default_date||"",d=e.date_format||"",r=e.additional_opts||"",o={minDate:t=o?new Date(e.start_year,"00","01"):t,maxDate:a=i?new Date(e.end_year,"11","31"):a,defaultDate:n,dateFormat:d,beforeShowDay:function(o){let e=l.data("params"),t=e.selectable_days_opt||"",a=e.selectable_days||"",i=e.selected_items||"",d=e.enable_disable_date_rules||"",r=!0;if((d="enable"===d?1:0)&&(r=!1),"days"===t||"date"===t){var n=o.getDate()+"-"+(o.getMonth()+1)+"-"+o.getFullYear();if(-1===p.inArray(n,a))return r=!1}else if("before"===t){n=o.getTime();let e=new Date;var c=(new Date).getHours();if(e.setHours(0,0,0,0),n<(e=e.getTime())||yith_wapo.disableCurrentDayBasedOnTime&&n<=e&&c>=yith_wapo.datepickerHourToCheck)return!1}0<i.length&&(i=JSON.parse(i),p.each(i,function(e,t){if("days"===e){let n=new Date(o);p.each(t,function(e,t){var[t,a,o]=t.split("-");let i=new Date(parseInt(t),parseInt(a)-1,parseInt(o));if(n.toDateString()===i.toDateString())return r=!!d,!1})}else if("daysweek"===e){let a=o.getDay();p.each(t,function(e,t){p.each(t,function(e,t){if(a==t)return r=!!d,!1})})}else if("months"===e){let a=o.getMonth();p.each(t,function(e,t){p.each(t,function(e,t){if(a==t-1)return r=!!d,!1})})}else if("years"===e){let a=o.getFullYear();p.each(t,function(e,t){p.each(t,function(e,t){if(a==t)return r=!!d,!1})})}}));var{addonId:n,optionId:c}=l.attr("name").match(/\[(?<addonId>[\d]+)-(?<optionId>[\d]+)\]$/).groups;return(r=wp.hooks.applyFilters("yith_wapo_addon_datepicker_before_show_day",r,o,n,c))?[!0]:[!1]},beforeShow:function(e){initTimePicker(l)},onSelect:function(a,o){if(0<p(o.dpDiv).find("#wapo-datepicker-time-select").length){let e=p(o.dpDiv).find("#wapo-datepicker-time-select").val(),t=p(this).closest(".date-container").find(".temp-time");p(this).val(a+" "+e),t.text(e)}let e=p("#"+o.id);e.change()},onChangeMonthYear:function(e,t,a){initTimePicker(l)},onUpdateDatepicker:function(e){p("#ui-datepicker-div").attr("wapo-option-id",e.id)},onClose:function(e,t){p(this).trigger("yith_wapo_date_field_updated",e)}},o=Object.assign(o,r);l.datepicker(o)},initColorpicker(),initDatePickers()}),jQuery(document).ready(function(_){var a=!1,e=".yith-wapo-edit-product-cart",t=".yith-wapo-popup",o=".yith-wapo-overlay",i=".yith-wapo-close",n=".yith-wapo-wrapper",c=".yith-wapo-content",h=".yith-wapo-footer",f=".yith-wapo-popup .single_add_to_cart_button",y=".yith-wapo-popup form.cart",l=".yith-wapo-popup form.variations_form",p="#yith-wapo-container",m=".yith-wapo-cart-item-key",d="#yith_wapo_product_img",w="form.cart",r="#wapo-total-price-table",s=".woocommerce-product-gallery",g="form.variations_form",u={productPrice:"#wapo-total-product-price",optionsPrice:"#wapo-total-options-price",orderPrice:"#wapo-total-order-price"},v={numDecimals:parseInt(yith_wapo.number_decimals)},k=_(t);initJS=function(){_(g).length<1&&calculateTotalAddonsPrice(),checkDefaultOptionsOnLoad(),moveEditProductLinkOnCart(),_(document).on("updated_wc_div",moveEditProductLinkOnCart),_(document).on("click",f,addToCart),_(document).on("click",e,openEditAddonsModal),_(document).on("click",i+","+o,closeModal),_(window).on("resize",centerEditModal)},addToCart=function(e){if(e.preventDefault(),e.stopPropagation(),!checkAddonsRequirements())return!1;var e=_(m).val(),t=_(l).find(".product_id").val(),a=_(l).find(".variation_id").val(),o=_(".yith-wapo-individual-addons.parent-key-"+e),i=[],o=(_.each(o,function(){i.push(_(this).data("cart-item-key"))}),{action:"ywapo_update_addons_on_cart_item",cart_item_key:e,individual_item_key:i,product_id:t,variation_id:a,addons:_(y).serializeArray(),security:yith_wapo.addons_nonce});_.ajax({url:yith_wapo.ajaxurl,type:"post",data:o,beforeSend:function(){},error:function(e,t,a){console.error("AJAX request failed: ",t,a)},success:function(e){e&&e.success&&(closeModal(),yith_wapo.wc_blocks.has_cart_block?(e=window.wc.wcBlocksData.CART_STORE_KEY,window.wp.data.dispatch(e).invalidateResolutionForStore(),window.wp.data.select(e).getCartData()):_(document).trigger("wc_update_cart"))}})},centerEditModal=function(){var e=_(n),t=_(window).width(),a=_(window).height(),o=yith_wapo.isMobile?_(window).width():_(window).width()/1.5,i=yith_wapo.isMobile?_(window).height():_(window).height()/1.3;e.css({left:t/2-o/2,top:a/2-i/2,width:o+"px",height:i+"px"})},loadProduct=function(r){centerEditModal(),_(n).block({message:null,overlayCSS:{opacity:0}});var e={action:"ywapo_load_product_template",product_id:r.data("product_id"),variation_id:r.data("variation_id"),cart_item_key:r.data("cart-item-key"),security:yith_wapo.addons_nonce};_.ajax({url:yith_wapo.ajaxurl,type:"post",data:e,error:function(e,t,a){console.error("AJAX request failed: ",t,a)},beforeSend:function(){r.block({message:null,overlayCSS:{background:"#fff url("+yith_wapo.loader+") no-repeat center/30%",opacity:.5,cursor:"none"}})},success:function(e){var t,a,o,i,n,d;e&&(t=e.variation&&""!==e.variation?e.variation:undefined,a=e.quantity??"",o=e["wccl-data"]??"",i=e.addon_image??"",n=e.quantities??"",d=e.addons??"",_(c).html(e.html),"undefined"!=typeof wc_add_to_cart_variation_params&&_(l).each(function(){_(this).wc_variation_form()}),initDatePickers(),initColorpicker(),_(s).wc_product_gallery(),t!=undefined&&setVariation(t),""!==o&&_.yith_wccl(o),moveAddToCartButton(),e=r.data("cart-item-key"),_(m).val(e),addonsSelection(d),n&&addonsQuantity(n),0<a&&setQuantity(a),i&&replaceAddonImage(i),calculateTotalAddonsPrice())},complete:function(){_(n).unblock({message:null}),r.unblock({message:null}),k.addClass("open"),_("body").addClass("yith-wapo-modal-is-open")}})},moveAddToCartButton=function(){var e=_(c).find(".single_add_to_cart_button");e&&_(h).find(".yith-wapo-add-to-cart").prepend(e)},replaceAddonImage=function(e){var t=yith_wapo.replace_image_path;_(t).attr("src",e),_(t).attr("srcset",e),_(t).attr("data-src",e),_(t).attr("data-large_image",e),_(".yith_magnifier_zoom_magnifier, .zoomWindowContainer .zoomWindow").css("background-image","url("+e+")"),_(d).val(e),0<_(".woocommerce-product-gallery .woocommerce-product-gallery__image").length&&_(s).trigger("woocommerce_gallery_reset_slide_position"),_(s).trigger("woocommerce_gallery_init_zoom"),_(document).trigger("yith-wapo-after-replace-image")},openEditAddonsModal=function(e){e.preventDefault(),e.stopPropagation(),loadProduct(_(this))},closeModal=function(){k.removeClass("open"),_("body").removeClass("yith-wapo-modal-is-open"),setTimeout(function(){_(c).html(""),_(h).find(".yith-wapo-add-to-cart").html("")},400)},moveEditProductLinkOnCart=function(){_(e).each(function(){var e=_(this);e.closest(".product-name").append(e)})},setVariation=function(t){_("form.variations_form.cart");for(var a in t.attributes){let e=_("select[name='"+a+"']");a=t.attributes[a];a&&0<e.length&&e.val(a)}},addonsSelection=function(e){var t,a=0;for(t in e){var o,p=e[t];for(o in p){var i=p[o],n=o.split("-"),d=n[0]??"",r=n[1]??"",c=_("#yith-wapo-addon-"+d).get(0),n=_(c).data("addon-type");if(""!==i){var l="";switch(n){case"checkbox":case"label":case"color":case"product":(l=_(c).find("#yith-wapo-"+d+"-"+r)).is(":checked")||_(l).click();break;case"radio":(l=_(c).find("#yith-wapo-"+d+"-"+i)).click();break;case"text":case"textarea":case"number":case"date":(l=_(c).find("#yith-wapo-"+d+"-"+r)).val(i);break;case"colorpicker":(l=_(c).find("#yith-wapo-"+d+"-"+r)).val(i),l.trigger("change");break;case"select":(l=_(c).find("#yith-wapo-"+d)).val(i);break;case"file":var s=_("#yith-wapo-option-"+d+"-"+r);loadUploadedFile({addon:_(c),option:s,addonVal:i,addonIndex:o,index:a,fileSize:""}),a++}}}}maybeHideImageUploaded()},loadUploadedFile=function(e){e.addon;var t=e.option??"";let a=e.addonVal??"";var o=e.addonIndex??"",i=e.index??"",e=e.fileSize??"",n=(a=_.isArray(a)?a[0]:a).split("/").reverse()[0]??"",d=a.endsWith("jpeg")||a.endsWith("jpg")||a.endsWith("png"),r=wp.template("yith-wapo-uploaded-file-template"),c=_(t).find(".yith-wapo-uploaded-file"),i={fileIndex:i,fileName:n,fileSize:e,optionId:o,image:d?a:"",addonVal:a};c.append(r(i)),c.closest(".file-container").find(".upload-parent").val(1),c.show(),maybeHideUploadButton(t)},maybeHideImageUploaded=function(){_(".yith-wapo-addon-type-file .yith-wapo-img-uploaded").each(function(){_(this).attr("src")||_(this).hide()})},maybeHideUploadButton=function(e){var t=e.data("max-multiple");e.find(".yith-wapo-uploaded-file-element").length>=t&&e.find(".yith-wapo-ajax-uploader-container").hide()},checkAddonsRequirements=function(){var e=checkNumbersTotalValues(),t=checkRequiredMinMax();return!!e&&(t||yith_wapo.disable_scroll_on_required_mix_max||_("html, body, .yith-wapo-content").animate({scrollTop:_(p).offset().top-20},500),t)},checkRequiredFields=function(n){var d=!1;yith_wapo.dom.single_add_to_cart_button;return _("form.cart .yith-wapo-addon:not(.hidden):visible input, form.cart .yith-wapo-addon:not(.hidden):visible select, form.cart .yith-wapo-addon:not(.hidden):visible textarea").each(function(){let e=_(this);e.closest(".yith-wapo-option");let t=e.closest(".yith-wapo-addon"),a=e.closest("div.yith-wapo-addon.wapo-toggle"),o=a.find(".wapo-addon-title.toggle-closed"),i=t.find(".wapo-addon-title");"file"===e.attr("type")||e.hasClass("wapo-product-qty")||(e.attr("required")&&("checkbox"===e.attr("type")||"radio"===e.attr("type"))&&!e.closest(".yith-wapo-option").hasClass("selected")||e.attr("required")&&"checkbox"!==e.attr("type")&&"radio"!==e.attr("type")&&(""==e.val()||"Required"==e.val())?("highlight"===n&&(showRequiredMessage(e),i.addClass("wapo-error"),o&&o.click()),d=!0):restartRequiredElement(e))}),!d},showRequiredMessage=function(e){let t=e.closest(".yith-wapo-option");t.find(".required-error").length<1&&(t.append('<div class="required-error"><small class="required-message">'+yith_wapo.messages.requiredMessage+"</small></div>"),t.addClass("required-color"))},restartRequiredElement=function(e){let t=e.closest(".yith-wapo-option");e.closest(".yith-wapo-option").find(".required-error").remove(),t.removeClass("required-color")},conditionalLogicCheck=function(e={}){var r={};_("form.cart .yith-wapo-addon.conditional_logic").each(function(){var e=!1,t=!1,a=_(this).data("conditional_logic_display"),o=_(this).data("conditional_logic_display_if"),i=String(_(this).data("conditional_rule_addon")),n=String(_(this).data("conditional_rule_addon_is")),d=String(_(this).data("conditional_rule_variations")),i=void 0!==i&&"0"!==i&&""!==i&&i.split("|"),n=void 0!==n&&""!==n&&n.split("|");if((d=void 0!==d&&""!==d&&d.split("|"))||i&&n){if(i&&n)switch(o){case"all":e=conditionalLogicAllRules(i,n);break;case"any":e=conditionalLogicAnyRules(i,n)}else e=!0;e&&d?(o=_(".variation_id").val(),-1!==_.inArray(String(o),d)&&(t=!0)):t=!0}else t=e=!0,a="show";switch(a){case"show":r[_(this).attr("id")]=t&&e?"not-hidden":"hidden";break;case"hide":r[_(this).attr("id")]=t&&e?"hidden":"not-hidden"}}),_.each(r,function(e,t){let a=_("#"+e);a.hasClass("hidden");"not-hidden"===t?(("slide"===yith_wapo.conditionalDisplayEffect?a.slideDown():a.fadeIn()).removeClass("hidden").find(".yith-wapo-option:not(.out-of-stock) .yith-wapo-option-value").attr("disabled",!1),a.hasClass("yith-wapo-addon-type-select")&&a.find(".yith-wapo-option-value").attr("disabled",!1),checkMinMax(a)):("slide"===yith_wapo.conditionalDisplayEffect?a.slideUp():a.hide()).addClass("hidden").find(".yith-wapo-option-value").attr("disabled",!0)}),JSON.stringify(r)!==JSON.stringify(e)&&conditionalLogicCheck(r),_(document).trigger("wapo_after_conditional_logic_check")},conditionalLogicAllRules=function(e,t){for(var a=!0,o=0;o<e.length;o++)if(0!=e[o]&&e[o]){var i,n,d=e[o].split("-"),r=!1,c=!1;switch(c="undefined"!=typeof d[1]?(r=(_("#yith-wapo-"+d[0]+"-"+d[1]).is(":checked")||_("select#yith-wapo-"+d[0]).val()==d[1])&&!_("#yith-wapo-addon-"+d[0]).hasClass("hidden"),n=_("input#yith-wapo-"+d[0]+"-"+d[1]).val(),i=_("textarea#yith-wapo-"+d[0]+"-"+d[1]).val(),(void 0!==n&&""!==n||void 0!==i&&""!==i)&&!_("#yith-wapo-addon-"+d[0]).hasClass("hidden")):(r=(r=0<_("#yith-wapo-addon-"+e[o]+" input:checkbox:checked").length||0<_("#yith-wapo-addon-"+e[o]+" input:radio:checked").length||0<_("#yith-wapo-addon-"+e[o]+" option:selected").length&&"default"!=_("#yith-wapo-addon-"+e[o]+" option:selected").val())&&!_("#yith-wapo-addon-"+e[o]).hasClass("hidden"),n="undefined",_("#yith-wapo-addon-"+d[0]+" input, #yith-wapo-addon-"+d[0]+" textarea").each(function(e){""!==_(this).val()&&(n=!0)}),"undefined"!=n&&""!==n&&!_("#yith-wapo-addon-"+d[0]).hasClass("hidden")),t[o]){case"selected":r||(a=!1);break;case"not-selected":r&&(a=!1);break;case"empty":c&&(a=!1);break;case"not-empty":c||(a=!1)}if(!a)break}return a},conditionalLogicAnyRules=function(e,t){for(var a=!1,o=0;o<e.length;o++)if(0!=e[o]&&e[o]){var i,n,d=e[o].split("-");switch(AddonNotEmpty="undefined"!=typeof d[1]?(AddonSelected=(_("#yith-wapo-"+d[0]+"-"+d[1]).is(":checked")||_("select#yith-wapo-"+d[0]).val()==d[1])&&!_("#yith-wapo-addon-"+d[0]).hasClass("hidden"),n=_("input#yith-wapo-"+d[0]+"-"+d[1]).val(),i=_("textarea#yith-wapo-"+d[0]+"-"+d[1]).val(),(void 0!==n&&""!==n||void 0!==i&&""!==i)&&!_("#yith-wapo-addon-"+d[0]).hasClass("hidden")):(AddonSelected=(AddonSelected=0<_("#yith-wapo-addon-"+e[o]+" input:checkbox:checked").length||0<_("#yith-wapo-addon-"+e[o]+" input:radio:checked").length||0<_("#yith-wapo-addon-"+e[o]+" option:selected").length&&"default"!=_("#yith-wapo-addon-"+e[o]+" option:selected").val())&&!_("#yith-wapo-addon-"+e[o]).hasClass("hidden"),n="undefined",_("#yith-wapo-addon-"+d[0]+" input, #yith-wapo-addon-"+d[0]+" textarea").each(function(e){""!==_(this).val()&&(n=!0)}),"undefined"!=n&&""!==n&&!_("#yith-wapo-addon-"+d[0]).hasClass("hidden")),t[o]){case"selected":AddonSelected&&(a=!0);break;case"not-selected":AddonSelected||(a=!0);break;case"empty":AddonNotEmpty||(a=!0);break;case"not-empty":AddonNotEmpty&&(a=!0)}if(a)break}return a},calculateAddonsPrice=function(){var f=0,y=0,m=0,w=0,g=_(yith_wapo.productQuantitySelector).val();return 0<!g&&(g=1),_("form.cart .yith-wapo-addon:not(.hidden):visible input, form.cart .yith-wapo-addon:not(.hidden):visible select, form.cart .yith-wapo-addon:not(.hidden):visible textarea").each(function(){let u=_(this),h=parseFloat(_(p).attr("data-product-price")),e=u.data("addon-id");if(e){let i=u.attr("type"),n=u.data("price-method"),d=0,r=0,c="",l=u.parents(".yith-wapo-addon"),p=l.data("addon-type"),s=1;if("number"===i&&0==u.val())return m;if(u.is("textarea")&&(i="textarea"),u.is(":checked")||u.find(":selected").is("option")||u.is("input:not([type=checkbox])")&&u.is("input:not([type=radio])")&&""!=u.val()||u.is("textarea")&&""!=u.val()){if(u.is("select")&&(u=u.find(":selected")),"number"===i){cleanError(u.closest(".yith-wapo-option"));var t=parseInt(u.attr("min")),a=parseInt(u.attr("max")),o=parseInt(u.val());if(a<o||o<t){let e=yith_wapo.messages.moreThanMax+" "+a;return o<t&&(e=yith_wapo.messages.lessThanMin+" "+t),void setError(u.closest(".yith-wapo-option"),e)}checkMultipliedPrice(u)}if("text"!==i&&"textarea"!==i||checkMultipliedLength(u),y!=e&&(y=u.data("addon-id"),f=u.data("first-free-options")),"yes"==u.data("first-free-enabled")&&0<f)f--;else{void 0!==u.data("price-type")&&""!==u.data("price-type")&&(c=u.data("price-type"));let e=u.data("price-sale"),t=u.data("price"),a=u.data("default-sale-price"),o=u.data("default-price");"number"===i&&"multiplied"!==c&&(e=u.attr("data-price-sale"),t=u.attr("data-price"),a=u.attr("data-default-sale-price"),o=u.attr("data-default-price")),void 0!==e&&""!==e&&0<=e&&"multiplied"!==c?(d=parseFloat(e),r=parseFloat(a)):void 0!==t&&""!==t&&(d=parseFloat(t),r=parseFloat(o)),"percentage"===c&&"discount"!==n&&(d=d*h/100,r=r*h/100),"product"===p&&(u.hasClass(".yith-wapo-option")||(u=u.parents(".yith-wapo-option"),(s=u.find(".wapo-product-qty"))&&1<(s=s.val())&&(d*=s,r*=s))),1<g&&!l.hasClass("sell_individually")&&(d*=g,r*=g),d=parseFloat(d),m+=d,w+=r}}}}),{totalPrice:parseFloat(m),totalPriceDefault:parseFloat(w)}},setTotalBoxPrices=function(e,t,a=0,o=0){var i=_(yith_wapo.productQuantitySelector).val(),e=e*(i=0<!i?1:i),i=parseFloat(t),t=(parseFloat(e)+i).toFixed(v.numDecimals),n=i;if(yith_wapo.includeShortcodePriceSuffix){var d=_(p).attr("data-order-price");if(yith_wapo.preventAjaxCallOnUnchangedTotals&&parseFloat(d)===parseFloat(t))return _(r).css("opacity","1"),!1;d={product_id:parseInt(_(p).attr("data-product-id")),options_price:i,options_default_price:o,total_order_price:t,currency:yith_wapo.woocommerce_currency};calculateProductPrice(d)}else{o=floatToWcPrice(i),d=floatToWcPrice(t),o=(_(u.optionsPrice).html(o+" "+yith_wapo.priceSuffix),_(u.orderPrice).html(d+" "+yith_wapo.priceSuffix),{order_price_suffix:d,order_price_raw:parseInt(_(p).attr("data-default-product-price"))+parseInt(i)});replaceProductPrice(t,d),_(document).trigger("wapo-after-calculate-product-price",o)}_(r).css("opacity","1"),_(document).trigger("yith_wapo_product_price_updated",[e+n])},replaceProductPrice=function(e,t){("yes"===yith_wapo.replace_price_in_product_without_addons||_(p).length&&_(p).find(".yith-wapo-block").length)&&(yith_wapo.hide_order_price_if_zero&&0===e&&(t=""),"yes"===yith_wapo.replace_product_price&&!isNaN(parseFloat(e))&&0<_(yith_wapo.replace_product_price_class).length&&_(yith_wapo.replace_product_price_class).html('<span class="woocommerce-Price-amount amount"><bdi>'+t+"</bdi></span>"))},calculateProductPrice=function(n){_(document).trigger("wapo-before-calculate-product-price");var e={action:"update_totals_with_suffix",data:n,security:yith_wapo.addons_nonce};_.ajax({url:yith_wapo.ajaxurl,type:"post",data:e,success:function(e){var t,a,o,i;e&&(t=e.price_html,a=e.options_price_suffix,o=e.order_price_suffix,i=n.total_order_price,_(u.productPrice).html(t),_(u.optionsPrice).html(a),_(u.orderPrice).html(o),_(p).attr("data-order-price",i),replaceProductPrice(i,o),_(document).trigger("wapo-after-calculate-product-price",e))}})},calculateTotalAddonsPrice=function(e=!0){conditionalLogicCheck(),"yes"===yith_wapo.hide_button_required&&(i=yith_wapo.dom.single_add_to_cart_button,_(i).hide(),t=checkRequiredFields("hide"),a=checkRequiredMinMax("hide"),t&&a&&_(i).fadeIn()),_(r).css("opacity","0.5");var t=parseFloat(_(p).attr("data-product-price")),a=yith_wapo.total_price_box_option;let o=_("button.ywgc-amount-buttons.selected_button");0<o.length&&(t=o.data("price"));var i=calculateAddonsPrice(),n=i.totalPrice,i=i.totalPriceDefault;"hide_options"===a&&(0!==n?_("#wapo-total-price-table .hide_options tr.wapo-total-options").fadeIn():_("#wapo-total-price-table .hide_options tr.wapo-total-options").hide()),setTotalBoxPrices(t,n,e,i)},productQuantityChange=function(){let e=_(this),t=e.val(),a=e.closest(".yith-wapo-option").data("product-id"),o=e.closest(".option-add-to-cart").find(".add_to_cart_button"),i=1,n;o.length&&a&&(n="?add-to-cart="+a+"&quantity="+(i=1<t?t:i),o.attr("href",n))},floatToWcPrice=function(e){var t={decimal_sep:yith_wapo.decimal_sep,currency_position:yith_wapo.currency_position,currency_symbol:yith_wapo.currency_symbol,trim_zeros:yith_wapo.total_thousand_sep,num_decimals:parseInt(yith_wapo.number_decimals),html:!0},a=e=(e=0<t.num_decimals?(a=parseInt(e).toString().length,a=parseInt(a)+parseInt(t.num_decimals),e=e.toString().substr(0,a+1),parseFloat(e).toFixed(2)):parseInt(e)).toString().replace(".",t.decimal_sep).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+t.trim_zeros),e=t.html?'<span class="woocommerce-Price-currencySymbol">'+t.currency_symbol+"</span>":t.currency_symbol;return"left"===t.currency_position?a=e+a:"right"===t.currency_position?a+=e:"left_space"===t.currency_position?a=e+" "+a:"right_space"===t.currency_position&&(a=a+" "+e),a=t.html?'<span class="woocommerce-Price-amount amount">'+a+"</span>":a},wcPriceToFloat=function(e){e=e.replace(/(?![\.\,])\D/g,"").replace(yith_wapo.total_thousand_sep,"").replace(yith_wapo.decimal_sep,".");return parseFloat(e)},getDefaultProductPrice=function(){if(yith_wapo.enableGetDefaultVariationPrice){let o=_(".variations_form.cart").data("product_id");var e={action:"get_default_variation_price",product_id:parseInt(o),security:yith_wapo.addons_nonce};_.ajax({url:yith_wapo.ajaxurl,type:"post",data:e,success:function(t){if(t){var a=t.price_html;let e=_(p);e.attr("data-product-price",t.current_price),e.attr("data-product-id",o),"yes"===yith_wapo.replace_product_price&&e.find(".yith-wapo-block").length&&_(yith_wapo.replace_product_price_class).html(a)}},complete:function(){}})}},checkDefaultOptionsOnLoad=function(){var e=_(".yith-wapo-addon:not(.conditional_logic):not(.hidden) .yith-wapo-option.selected");_(e).each(function(){var e=_(this);replaceImageAction(e)})},resetAddons=function(e,t){"yith_wccl"!==t&&(a?(getDefaultProductPrice(),_(document).trigger("yith-wapo-reset-addons")):a=!0)},foundVariation=function(e,t){"variations_form cart in_loop initialized"===e.target.classList.value||_("form.cart.ywcp").length||(updateContainerProductPrice(t),_(document).trigger("yith-wapo-reload-addons"))},reloadAddons=function(e,t=""){var a={action:"live_print_blocks",addons:_(w).serializeArray(),currency:yith_wapo.woocommerce_currency,current_language:yith_wapo.currentLanguage,security:yith_wapo.addons_nonce};""!=t&&(a.price=t),_.ajax({url:yith_wapo.ajaxurl,type:"post",data:a,beforeSend:function(){_(p).css("opacity","0.5")},error:function(e,t,a){console.error("AJAX request failed: ",t,a)},success:function(e){var t=e.html??"",a=e.quantities??"",t=(""!==t&&_(p).html(t),e.addons??"");""!==t&&addonsSelection(t),a&&addonsQuantity(a),_("form.cart #yith-wapo-container select").trigger("change"),_("form.cart").trigger("yith-wapo-after-reload-addons")},complete:function(e){_(p).attr("data-order-price",0),calculateTotalAddonsPrice(),_(p).css("opacity","1")}})},addonsQuantity=function(a){_.each(_(p).find(".qty.wapo-product-qty"),function(){let e=_(this).attr("id");var t=e.replace("yith_wapo_product_qty","").replace("[","").replace("]","");t in a&&(t=a[t],_(this).val(t))})},setQuantity=function(e){_("div.quantity input.input-text.qty ").val(e)},removeUploadedFile=function(e){let t=e.target,a=_(t).closest(".yith-wapo-uploaded-file-element"),o=_(t).closest(".yith-wapo-option").data("max-multiple"),i=_(t).closest(".yith-wapo-ajax-uploader").find(".yith-wapo-uploaded-file-element").length,n=_(t).closest(".yith-wapo-ajax-uploader").find(".yith-wapo-ajax-uploader-container"),d=_(t).closest(".yith-wapo-option").find('input[type="hidden"].upload-parent'),r=_(t).closest(".yith-wapo-option").find('input[type="file"]');a.remove(),r.val(""),(void 0===o||i-1<o)&&n.fadeIn(),i-1<=0&&(d.val(""),calculateTotalAddonsPrice())},maybeCalculateTotals=function(e){let t=!1,a=(e.is('input[type="number"]')&&(t=!!(0==e.attr("name").indexOf("yith_wapo_product_qty")&&e.hasClass("qty")||"quantity"===e.attr("name")&&e.hasClass("qty"))),"");e.is("select")&&(a=e.closest(".yith-wapo-addon.yith-wapo-addon-type-select")),(addonOptHasPrice(e)||t||a&&"select"===a.data("addon-type"))&&calculateTotalAddonsPrice()},addonOptHasPrice=function(e=null){var t=getOptionPrice(e),e=getOptionSalePrice(e);return void 0!==t&&""!==t||void 0!==e&&""!==e},getOptionPrice=function(e){return e.data("price")},getOptionSalePrice=function(e){return e.data("sale-price")},checkNumbersTotalValues=function(){var e=_("#yith-wapo-container .yith-wapo-addon-type-number:not(.hidden).numbers-check"),c=!1;return e.each(function(e){let t=_(this),a=t.data("numbers-min"),o=t.data("numbers-max"),i=0,n=!1,d="",r=t.find(".options");r.hasClass("error-message")&&r.removeClass("error-message"),t.find(".yith-wapo-numbers-error-message").remove(),t.find('input[type="number"]').each(function(){var e=_(this).val();if("undefined"===e||""===e)return!0;i+=parseFloat(e)}),void 0!==a&&i<a&&(n=!0,d=yith_wapo.messages.minErrorMessage+" "+a),void 0!==o&&i>o&&(n=!0,d=yith_wapo.messages.maxErrorMessage+" "+o),n&&(r.addClass("error-message"),t.append(_('<small class="yith-wapo-numbers-error-message">'+d+"</small>")),c=!0,_("html, body").animate({scrollTop:t.offset().top-50},500))}),_(document).trigger("yith_wapo_check_number_total_values"),!c},replaceImageAction=function(e,t=!1){var o,a=yith_wapo.replace_image_path,i=".yith_magnifier_zoom_magnifier, .zoomWindowContainer .zoomWindow",n=e.data("replace-image");null===n||!t&&_(a).attr("src")===n||(void 0!==e.data("replace-image")&&""!=e.data("replace-image")&&(void 0===_(a).attr("wapo-original-img")&&(_(a).attr("wapo-original-img",_(a).attr("src")),_(i).length&&_(i).attr("wapo-original-img",_(i).css("background-image").slice(4,-1).replace(/"/g,""))),_(d).val(n),_(i).css("background-image","url("+n+")"),replaceAddonImage(n)),t&&void 0!==_(a).attr("wapo-original-img")&&(o=_(a).attr("wapo-original-img"),e=_(i).attr("wapo-original-img"),n=_(d).val(),_(d).val(""),_(p).find(".yith-wapo-addon:not(.yith-wapo-addon-type-select):not(.conditional_logic.hidden) .yith-wapo-option.selected, .yith-wapo-addon-type-select:not(.conditional_logic.hidden) .yith-wapo-option-value").each(function(e,t){let a=_(t);(a=a.is("select")?a.find(":selected"):a).data("replace-image")&&(a.hasClass("selected")||a.is("option"))&&(o=a.data("replace-image"),_(d).val(o))}),n!==o&&(_(i).css("background-image","url("+e+")"),replaceAddonImage(o))))},checkMaxSelected=function(e){var t=e.closest(".yith-wapo-option"),e=e.closest(".yith-wapo-addon"),a=e.data("max"),e=e.find(".yith-wapo-option.selected").length;return""===a||0===a||(t.hasClass("selected")?e--:e++,!(a<e))},addonImageClicked=function(){"label"!==_(this).closest(".yith-wapo-addon").data("addon-type")&&_(this).closest(".yith-wapo-option").find("input[name^='yith_wapo']").click()},checkboxOnChange=function(){let e=_(this),t=e.closest(".checkboxbutton"),a=e.closest(".yith-wapo-option"),o=a.parent(),i=!1;a.data("replace-image").length<=0&&(i=!0),"checked"!==e.attr("checked")?(a.hasClass("selection-single")&&(o.find("input").attr("checked",!1).prop("checked",!1),o.find(".selected, .checked").removeClass("selected checked")),e.attr("checked",!0).prop("checked",!0),a.addClass("selected"),t.addClass("checked")):(e.attr("checked",!1).prop("checked",!1),a.removeClass("selected"),t.removeClass("checked"),i=!0),replaceImageAction(a,i)},inputOnChange=function(){var e=_(this),t=e.closest(".yith-wapo-option"),a=!1;""!==e.val()&&t.hasClass("selection-single")&&(a=!0,t.siblings().find("input").prop("disabled",!0)),t.siblings().find("input").prop("disabled",a)},textareaOnChange=function(){var e=_(this),t=e.closest(".yith-wapo-option"),a=!1;""!==e.val()&&t.hasClass("selection-single")&&(a=!0,t.siblings().find("textarea").prop("disabled",!0)),t.siblings().find("textarea").prop("disabled",a)},labelsOnChange=function(){let e=!1;if(!checkMaxSelected(_(this)))return _(this).prop("checked",!1),!1;var t=_(this).closest(".yith-wapo-option");t.data("replace-image").length<=0&&(e=!0),_(this).is(":checked")?(t.hasClass("selection-single")&&(t.parent().find("input").prop("checked",!1),t.parent().find(".selected").removeClass("selected")),t.addClass("selected"),t.find("input").prop("checked",!0)):(e=!0,t.removeClass("selected")),replaceImageAction(t,e)},colorOnChange=function(){let e=!1;var t=_(this).closest(".yith-wapo-option");t.data("replace-image").length<=0&&(e=!0),_(this).is(":checked")?(t.addClass("selected"),t.hasClass("selection-single")&&(t.parent().find("input").prop("checked",!1),t.parent().find(".selected").removeClass("selected"),t.find("input").prop("checked",!0),t.addClass("selected"))):(e=!0,t.removeClass("selected")),replaceImageAction(t,e)},productOnChange=function(){var e=_(this).closest(".yith-wapo-option");_(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected"))):e.removeClass("selected")},radioOnChange=function(){let e=!1;var t=_(this).closest(".yith-wapo-option");t.data("replace-image").length<=0&&(e=!0),t.addClass("selected"),t.siblings().removeClass("selected"),replaceImageAction(t,e)},selectOnChange=function(){let e=_(this).closest(".yith-wapo-addon"),t=_(this).find("option:selected"),a=e.find("div.option-image"),o=!1;var i=t.data("image"),n=t.data("description"),d=e.find("p.option-description");void 0!==i&&i&&(i='<img src="'+i+'" style="max-width: 100%">',a.html(i)),"default"===t.val()||""===i?a.hide():a.fadeIn(),void 0===n?d.empty():d.html(n),t.data("replace-image")||(o=!0),replaceImageAction(t,o)},fileOnChange=function(e){_(this).closest(".yith-wapo-ajax-uploader").css("opacity","1");var t=_(this),a=t.closest(".yith-wapo-option").find(".yith-wapo-ajax-uploader"),t=t[0].files;checkBeforeUploadFiles(a,t)&&uploadFiles(t,a)},toggleElement=function(e){e.preventDefault();let t=_(this).find(".wapo-addon-title"),a=t.closest(".yith-wapo-addon");a.hasClass("toggle-open")?a.removeClass("toggle-open").addClass("toggle-closed"):a.removeClass("toggle-closed").addClass("toggle-open"),t.hasClass("toggle-open")?t.removeClass("toggle-open").addClass("toggle-closed"):t.removeClass("toggle-closed").addClass("toggle-open"),a.find(".options-container").toggle("fast"),_(document).trigger("yith_proteo_inizialize_html_elements")},updateContainerProductPrice=function(a){if(!_(".cart.yith-wcpb-bundle-form").length&&a.variation_id===parseInt(_(".variation_id").val())){let e=_(p),t=0;var o;"undefined"!=typeof a.display_price&&(t=a.display_price,"yes"===yith_wapo.use_price_html_on_variations&&"undefined"!=typeof a.price_html&&(o=_(a.price_html).find("> .amount bdi").text(),o=wcPriceToFloat(o),isNaN(o)||t===o||(t=o))),e.attr("data-product-price",t),e.attr("data-default-product-price",a.default_variation_price),e.attr("data-product-id",a.variation_id)}},yithWcMeasurementPC_Compatibility=function(){var t=_("#price_calculator.wc-measurement-price-calculator-price-table .product_price .amount").text(),t=wcPriceToFloat(t);if(!isNaN(t)){let e=_(p);e.attr("data-product-price",t),_(document).trigger("yith-wapo-reload-addons",[t])}},ajaxUploaderOnDrop=function(e){e.stopPropagation(),e.preventDefault(),_(this).css("opacity","1");_(this).closest(".yith-wapo-option").find("input.file");var t=_(this),e=e.originalEvent.dataTransfer.files;checkBeforeUploadFiles(t,e)&&uploadFiles(e,t)},checkBeforeUploadFiles=function(e,o){var i,t=_(e).find(".yith-wapo-uploaded-file-element").length+o.length,a=_(e).closest(".yith-wapo-option").data("max-multiple");if(!_(e).closest(".yith-wapo-option").hasClass("allow-multiple")&&1<t)return alert(yith_wapo.messages.maxFilesAllowed+"1"),!1;if(void 0!==a&&a<t)return alert(yith_wapo.messages.maxFilesAllowed+a),!1;for(i in o)if(_.isNumeric(i)){let e=o[i],t="",a=!1;if(yith_wapo.upload_allowed_file_types.includes(e.name.split(".").pop().toLowerCase())||(t=yith_wapo.messages.noSupportedExtension,a=!0),parseFloat(e.size)>=parseFloat(1024*yith_wapo.upload_max_file_size*1024)&&(t=wapoSprintf(yith_wapo.messages.maxFileSize,e.name,yith_wapo.upload_max_file_size),a=!0),a)return alert(t),!1}return!0},wapoSprintf=function(e,...o){return e.replace(/%([sd])/g,function(e,t){if("s"===t)return o.shift();if("d"!==t)return e;{const a=o.shift();return Number.isInteger(a)?a.toString():""}})},uploadFiles=function(a,o){for(var i=0;i<a.length;i++){let e=o.find(".yith-wapo-uploaded-file"),t=o.find(".yith-wapo-uploaded-file-element").last().data("index")+1;!isNaN(t)&&void 0!==t||(t=0),appendNewUploadedFile(i,a,e,t),i==a.length-1&&(e.show(),uploadSingleFile(a,0,o))}},appendNewUploadedFile=function(e,t,a,o){var i=calculateExactFileSize(t[e]),e=t[e].name,t=_(a).closest(".yith-wapo-option").data("option-id");a.append('<div class="yith-wapo-uploaded-file-element uploaded-file-'+o+'" data-index="'+o+'"><div class="yith-wapo-uploaded-file-info"><span class="info"><label class="file-name"><span>'+e+'</span></label><span class="file-size">'+i+'</span></span><i class="remove yith-plugin-fw__action-button__icon yith-icon yith-icon-trash" style="display:none"></i></div><div class="yith-wapo-loader-container" id="progressbar'+o+'"><div class="yith-wapo-loader-label"></div><div class="yith-wapo-loader" role="progressbar"></div></div><input type="hidden" id="yith-wapo-'+t+'" class="option yith-wapo-option-value" name="yith_wapo[]['+t+'][]" ></div>')},uploadSingleFile=function(i,n,d,r=!1,c=0){0===parseInt(c)&&_(d).find(".yith-wapo-uploaded-file-element.completed").length&&(c=_(d).find(".yith-wapo-uploaded-file-element.completed").last().data("index")+1);var l=i.length-1,t=i[n],e=new FormData,s=_(d).closest(".yith-wapo-option"),a=s.data("max-multiple"),u=_(d).find(".yith-wapo-uploaded-file"),h=_(d).find(".yith-wapo-ajax-uploader-container"),p=_(d).find('.yith-wapo-uploaded-file-element[data-index="'+c+'"]'),f=_(d).find(".yith-wapo-uploaded-file-info .remove"),y=_(p).find(".yith-wapo-loader-container .yith-wapo-loader-label"),o=_(p).find(".yith-wapo-loader-container .yith-wapo-loader");e.append("action","yith_wapo_upload_file"),e.append("security",yith_wapo.addons_nonce),e.append("currentFile",t),_.ajax({url:yith_wapo.ajaxurl,type:"POST",contentType:!1,processData:!1,"async":!0,dataType:"json",data:e,xhr:function(){var e=_.ajaxSettings.xhr();return e.upload&&(e.upload.addEventListener("progress",function(e){var t=0;e.lengthComputable&&(t=Math.ceil(e.loaded/e.total*100)),o.progressbar({value:t})},!1),e.addEventListener("progress",function(e){if(1==i.length||r){var t;s.hasClass("allow-multiple")&&(t=_(d).find(".yith-wapo-uploaded-file-element").length,(void 0===a||void 0!==a&&t<a)&&h.fadeIn()),f.fadeIn();let e=_(d).closest(".yith-wapo-option").find('input[type="hidden"].upload-parent');e.val(1),calculateTotalAddonsPrice()}},!1)),e},beforeSend:function(){h.hide(),u.show(),o.progressbar({change:function(){y.text(o.progressbar("value")+"% "+yith_wapo.i18n.uploadPercentageDoneString)},complete:function(e){_(e.target).closest(".yith-wapo-loader-container").fadeOut()}}),o.show(),_(".cart").block({message:null,overlayCSS:{opacity:0}})},success:function(o,e){if("success"==e){let e=p.find('input[type="hidden"]'),t=p.find(".yith-wapo-uploaded-file-info span.info"),a=o.type;e.val(o.url),"image/jpeg"!==a&&"image/jpg"!==a&&"image/png"!==a&&"image/gif"!==a&&"image/svg+xml"!==a||t.append('<img src="'+o.url+'" class="yith-wapo-img-uploaded" alt="Image uploaded from YITH Product Add-ons uploader">').fadeIn(),n<l&&(n==l-1&&(r=!0),uploadSingleFile(i,n+1,d,r,c+1))}},complete:function(){_(p).addClass("completed"),console.log("Single file upload completed!"),_(".cart").unblock({message:null})},error:function(e){console.log("File upload failed!"),_(".cart").unblock({message:null})}})},calculateExactFileSize=function(e){let t=e.size,a=0;for(;900<t;)t/=1024,a++;return Math.round(100*t)/100+" "+["Bytes","KB","MB","GB"][a]},checkRequiredMinMax=function(e=""){let t=!0;checkRequiredSelect(e)||(t=!1),checkTextInputLimit()||(t=!1),"hide"!==e&&(checkRequiredFields("highlight")||(t=!1));var a,o=0,i="hide"!==e;return _("form.cart .yith-wapo-addon:not(.hidden)").each(function(){0<(a=checkMinMax(_(this),i))&&(o+=a)}),t="hide"!==e&&0<o?!1:t},checkMinMax=function(a,e=!1){var t=a.data("addon-type"),o=a.data("min"),i=a.data("max"),n=a.data("exa"),d=a.find(".min-error-message"),r=a.find(".wapo-addon-title"),c=0;let l=a.find(".wapo-addon-title.toggle-closed");if(r.removeClass("wapo-error"),"select"!==t&&(""!==o||""!==n||""!==i)){if("number"===t||"text"===t||"textarea"===t){if(_(a).find(".yith-wapo-option-value").each(function(e){_(this).val().length&&c++}),i&&i<c){let e=_(a).find(".options-container");return e.find(".max-selected-error").length||(e.append('<p class="max-selected-error">'+yith_wapo.i18n.maxOptionsSelectedMessage+"</p>"),r.addClass("wapo-error")),1}}else c=("file"===t?_(a).find(".yith-wapo-uploaded-file").has(".yith-wapo-uploaded-file-element"):a.find("input:checkbox:checked, input:radio:checked")).length;if(0<n){let t=0;if(n==c)a.removeClass("required-min").find(".min-error").hide(),a.find("input:checkbox").not(":checked");else{if(e){t=n-c,a.addClass("required-min"),a.find(".min-error").show(),r.addClass("wapo-error");let e=yith_wapo.i18n.selectOptions.replace("%d",n);1===n&&(e=yith_wapo.i18n.selectAnOption),d.text(e),l&&l.click()}a.find(".yith-wapo-option:not(.out-of-stock) input:checkbox").not(":checked").attr("disabled",!1)}return Math.abs(t)}if(0<o){t=o-c;if(!(o<=c)){if(e){let e=yith_wapo.i18n.selectAnOption;1<o&&(e=yith_wapo.i18n.selectAtLeast.replace("%d",o)),a.addClass("required-min"),a.find(".min-error").show(),r.addClass("wapo-error"),d.text(e),l&&l.click()}return t}a.removeClass("required-min").find(".min-error").hide()}if(i&&!(c<=i)){if(e){a.addClass("required-min");let e=_(a).find(".options-container");e.find(".max-selected-error").length||(e.append('<small class="max-selected-error">'+yith_wapo.i18n.maxOptionsSelectedMessage+"</small>"),r.addClass("wapo-error"))}return 1}a.removeClass("required-min").find(".max-selected-error").hide()}},checkRequiredSelect=function(t=""){let a=!0;return _(".yith-wapo-addon.yith-wapo-addon-type-select select").each(function(){let d=_(this);if(d.is(":required")){let o=d.closest(".yith-wapo-addon"),i=o.find(".min-error-message"),n=o.find(".wapo-addon-title");var e=d.val();if(i.text(""),n.removeClass("wapo-error"),o.removeClass("required-min"),"default"===e&&!o.hasClass("hidden")&&!(a=!1)&&"hide"!==t){let e=o.find(".min-error"),t=d.closest("div.yith-wapo-addon.wapo-toggle"),a=t.find(".wapo-addon-title.toggle-closed");o.addClass("required-min"),a&&a.click(),n.addClass("wapo-error"),i.text(yith_wapo.i18n.selectAnOption.replace("%d",1)),e.show()}}}),a},checkTextInputLimit=function(){let d=!0;return _("form.cart .yith-wapo-addon.yith-wapo-addon-type-text:not(.hidden) input").each((e,t)=>{let a=_(t),o=a.val(),i=a.attr("minlength"),n=a.attr("maxlength");""!==i&&o.length<i||""!==n&&o.length>n?(a.addClass("length-error"),a.siblings(".length-error-message").show(),d=!1):(a.siblings(".length-error-message").hide(),a.removeClass("length-error"))}),d},numberOnChange=function(){var e=_(this).val(),t=_(this).closest(".yith-wapo-option");replaceImageAction(t,""==e?!0:!1),checkMultipliedPrice(_(this))},checkMultipliedPrice=function(e){let t=e.attr("data-price");var a=e.attr("data-price-sale"),o=e.attr("data-default-price"),i=e.data("price-type"),n=e.data("price-method");let d="price",r=0;var c=e.val();0<!o&&(0<a&&"number"!==e.attr("type")&&"multiplied"===i&&(t=a,d="price-sale"),o=t,e.data("default-price",o)),"value_x_product"==n?(a=parseFloat(_(p).attr("data-product-price")),r=c*a):"multiplied"==i&&(r=c*t),(0<r||"decrease"==n||r<0&&"multiplied"===i)&&e.data(d,r)},checkMultipliedLength=function(t){var a=t.data("price");let o=t.data("default-price");var e=t.data("price-type");if(0<!o&&(o=a,t.data("default-price",o)),"characters"===e){a=t.data("remove-spaces");let e=t.val().length;a&&(e=t.val().replace(/\s+/g,"").length),t.data("price",e*o)}},productQtyOnKeyUp=function(){var e="?add-to-cart="+_(this).data("product-id")+"&quantity="+_(this).val();_(this).parent().find("a").attr("href",e)},datepickerSaveButton=function(e){e.preventDefault();e=_("#ui-datepicker-div .ui-state-active");(e=0==e.length?_("#ui-datepicker-div .ui-datepicker-today"):e).click(),_(".hasDatepicker").datepicker("hide")},datepickertimeOnChange=function(e){e.preventDefault();e=_("#ui-datepicker-div").attr("wapo-option-id");_("#"+e).closest(".date-container").find(".temp-time").text(_(this).val())},requestAQuoteButton=function(e){e.preventDefault(),"undefined"==typeof yith_wapo_general&&(yith_wapo_general={do_submit:!0}),checkRequiredMinMax()?yith_wapo_general.do_submit=!0:yith_wapo_general.do_submit=!1},compositePriceUpdated=function(e,t){var a=parseFloat(_("form.cart.ywcp > div.quantity input.qty").val()),a=a?t/a:t;let o=_(p);o.attr("data-product-price",a),calculateTotalAddonsPrice()},setError=function(e,t){e.find(".yith-wapo-error").remove();let a=e.find(".yith-wapo-addon-label");a.addClass("wapo-error"),e.append('<small class="yith-wapo-error">'+t+"</small>")},cleanError=function(e){let t=e.find(".yith-wapo-addon-label");e.find(".yith-wapo-error").remove(),t.removeClass("wapo-error")},_(document).on("ywgc-amount-changed",function(e,t){t=t.data("price");let a=_(p);a.attr("data-product-price",t),calculateTotalAddonsPrice()}),_(document).on("yith-wapo-product-price-updated",function(e,t){void 0!==t&&_(p).attr("data-product-price",t),calculateTotalAddonsPrice()}),_(document).on("change",".gift-cards-list .ywgc-manual-amount-container input.ywgc-manual-amount",function(e){let t=_(this),a=t.val(),o=_(p);o.attr("data-product-price",a),calculateTotalAddonsPrice()}),_(document).on("woocommerce-product-bundle-updated-totals",function(e,t){var a=t.price_data.subtotals.price;let o=_(t.$bundle_price);o.find(".amount").html();let i=_(p);i.attr("data-product-price",a),calculateTotalAddonsPrice()}),_(document).on("ywdpd_price_html_updated",function(e,t){t=_(t).children(".amount bdi").text(),t=wcPriceToFloat(t);if(!isNaN(t)){let e=_(p);e.attr("data-product-price",t),calculateTotalAddonsPrice()}}),_(document).on("yith_wcpb_ajax_update_price_request",function(e,t){t=t.price;isNaN(t)||(_(p).attr("data-product-price",t),_(document).trigger("yith-wapo-reload-addons",t))}),_(document).on("change","form.cart div.yith-wapo-addon, form.cart .quantity input[type=number]",function(e){if(_(e.delegateTarget.activeElement).hasClass("yith-wapo-edit-product-cart"))return!1;e=_(e.target);maybeCalculateTotals(e)}),_(document).on("keyup",'form.cart .yith-wapo-addon-type-number input[type="number"], form.cart .yith-wapo-addon-type-text input[type="text"], form.cart .yith-wapo-addon-type-textarea textarea',function(e){if(_(e.delegateTarget.activeElement).hasClass("yith-wapo-edit-product-cart"))return!1;e=_(this);maybeCalculateTotals(e)}),_(document).on("wapo-colorpicker-change wapo-colorpicker-clear",function(e,t){if(_(e.delegateTarget.activeElement).hasClass("yith-wapo-edit-product-cart"))return!1;maybeCalculateTotals(_(t))}),_(document).on("change keyup",".yith-wapo-option .wapo-product-qty",productQuantityChange),_(document).on("reset_data",resetAddons),_(document).on("found_variation",foundVariation),_(document).on("yith-wapo-reload-addons",reloadAddons),_(document).on("click",".yith-wapo-uploaded-file .remove",removeUploadedFile),_("form.cart").on("click","span.checkboxbutton",function(){_(this).find("input").is(":checked")?_(this).addClass("checked"):_(this).removeClass("checked")}),_(document).on("change",".yith-wapo-addon-type-checkbox input",checkboxOnChange),_(document).on("click",".yith-wapo-addon-type-label .yith-wapo-option div.label",function(){_(this).closest(".yith-wapo-option").find(".yith-proteo-standard-checkbox").click()}),_(document).on("change",".yith-wapo-addon-type-label input",labelsOnChange),_(document).on("change keyup",".yith-wapo-addon-type-text input",inputOnChange),_(document).on("change keyup",".yith-wapo-addon-type-textarea textarea",textareaOnChange),_(document).on("click",".yith-wapo-addon-type-color .yith-wapo-option div.label",function(){_(this).closest(".yith-wapo-option").find(".yith-proteo-standard-checkbox").click()}),_(document).on("change",".yith-wapo-addon-type-color input",colorOnChange),_(document).on("click change",".yith-wapo-addon-type-product .quantity input",function(e){e.stopPropagation()}),_(document).on("click",".yith-wapo-addon-type-product .yith-wapo-option .product-container",function(){_(this).closest(".yith-wapo-option").find(".yith-proteo-standard-checkbox").click()}),_(document).on("change",".yith-wapo-addon-type-product .yith-wapo-option input.yith-proteo-standard-checkbox",productOnChange),_(document).on("click",".yith-wapo-option .image-container",addonImageClicked),_("form.cart").on("click","span.radiobutton",function(){_(this).find("input").is(":checked")&&(_(this).closest(".yith-wapo-addon.yith-wapo-addon-type-radio").find("span.radiobutton.checked").removeClass("checked"),_(this).addClass("checked"))}),_(document).on("click",".yith-wapo-addon-type-radio input",radioOnChange),_(document).on("change",".yith-wapo-addon-type-select select",selectOnChange),_(document).on("change",".yith-wapo-addon-type-file input.file",fileOnChange),_(document).on("click",".yith-wapo-ajax-uploader .button, .yith-wapo-ajax-uploader .link",function(){_(this).closest(".yith-wapo-option").find("input.file").click()}),_(document).on("change keyup",".yith-wapo-addon-type-number input",numberOnChange),_(document).on("click","#wapo-datepicker-save button",datepickerSaveButton),_(document).on("change","#wapo-datepicker-time-select",datepickertimeOnChange),_(document).on("click",".yith-wapo-addon.wapo-toggle .addon-header",toggleElement),_(document).on("keyup",".wapo-product-qty",productQtyOnKeyUp),_("form.cart").on("change","#price_calculator.wc-measurement-price-calculator-price-table",yithWcMeasurementPC_Compatibility),_(document).on("yith_wcp_price_updated",function(e,t){_(document).trigger("yith-wapo-reload-addons",t)}),_("html").on("dragover, drop",function(e){e.preventDefault(),e.stopPropagation()}),_(document).on("dragenter",".yith-wapo-ajax-uploader",function(e){e.stopPropagation(),e.preventDefault(),_(this).css("opacity","0.5")}),_(document).on("dragover",".yith-wapo-ajax-uploader",function(e){e.stopPropagation(),e.preventDefault()}),_(document).on("dragleave",".yith-wapo-ajax-uploader",function(e){e.stopPropagation(),e.preventDefault(),_(e.target).hasClass("yith-wapo-ajax-uploader")&&_(this).css("opacity","1")}),_("body").on("drop",".yith-wapo-ajax-uploader",ajaxUploaderOnDrop),_(document).on("change",".yith-wapo-addon-type-checkbox, .yith-wapo-addon-type-color, .yith-wapo-addon-type-label, .yith-wapo-addon-type-product",function(){checkMinMax(_(this))}),_(document).on("click","form.cart button",function(){return checkAddonsRequirements()}),_(document).on("yith_wcp_price_updated",compositePriceUpdated),_(document).on("click",".add-request-quote-button",requestAQuoteButton),initJS()});