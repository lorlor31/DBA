jQuery(document).ready((function(e){"use strict";var t=e('form[name="checkout"]').find("p.form-row input, p.form-row textarea"),r=function(e,t){e.next(".ywccp_error").length||e.after('<span class="ywccp_error"></span>'),e.next(".ywccp_error").html(t)};t.length&&e.each(t,(function(){var t=e(this),i=t.data("tooltip"),n=t.closest("p.form-row");t.on("blur",(function(){var i=e(this),c=i.val(),o="";ywccp_front.validation_enabled&&(!c&&n.hasClass("validate-required")?(o=ywccp_front.err_msg,r(i,o)):c&&n.hasClass("validate-vat")&&!function(t){var r=e("#billing_country");if("undefined"==typeof checkVATNumber||!r.length||!ywccp_front.vat_validation_enabled)return!0;var i=t.substr(0,2).toUpperCase(),n=r.val();return i!==n&&(t=n+t),checkVATNumber(n,t)}(c)?r(i,ywccp_front.err_msg_vat):c&&n.hasClass("validate-email")&&!/^([\w-]+(?:\.[\w-]+)*)(\+?)([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(c)?r(i,ywccp_front.err_msg_mail):t.next(".ywccp_error").remove())})),void 0!==i&&""!=i&&void 0!==e.fn.qtip&&t.qtip({content:{text:i},show:{event:"focus"},style:{classes:"ywccp_tooltip"},position:{my:"bottom center",at:"top center",viewport:e(window)}})}));var i=e(".ywccp-multiselect-type, select.select"),n=e(".ywccp-datepicker-type"),c=e(".ywccp-timepicker-type");i&&void 0!==e.fn.select2&&e.each(i,(function(){var t=e(this),r=t.attr("id");e("#s2id_"+r).length||t.select2({placeholder:t.data("placeholder")})})),void 0!==e.fn.datepicker&&n&&e.each(n,(function(){e(this).datepicker({dateFormat:e(this).data("format")||"dd-mm-yy",changeYear:ywccp_front.datepicker_change_year,changeMonth:ywccp_front.datepicker_change_month,yearRange:ywccp_front.datepicker_year_range,minDate:ywccp_front.datepicker_min_date,maxDate:ywccp_front.datepicker_max_date,beforeShow:function(){setTimeout((function(t){e("#ui-datepicker-div").wrap('<div class="yith_datepicker"></div>').css("z-index",99999999999999),e("#ui-datepicker-div").show()}),0)},beforeShowDay:function(e){return ywccp_front.datepicker_allowed_days.includes(e.getDay())?[!0]:[!1]},onClose:function(){e("#ui-datepicker-div").hide(),e("#ui-datepicker-div").unwrap()}})})),void 0!==e.fn.timepicki&&c&&(e.each(c,(function(){e(this).timepicki({reset:!0,disable_keyboard_mobile:!0,show_meridian:ywccp_front.time_format,max_hour_value:ywccp_front.time_format?"12":"23",min_hour_value:ywccp_front.time_format?"1":"0",overflow_minutes:!0,increase_direction:"up"})})),e(document).on("click",".reset_time",(function(e){e.preventDefault()})));var o=function(t){var r=t.input_name,i=t.type,n=(t.action,t.required,t.value),c=function(t){var r=e("*[name="+t+"]");return r.length>1?function(e){var t=null;return e.each((function(r){if("radio"==e[r].type&&e[r].checked)return t=e[r].value,!1})),t}(r):"checkbox"==r.attr("type")?r.is(":checked"):"radio"==r.attr("type")?e("#"+t+":checked").val():r.val()}(r),o=!1;switch(i){case"is-set":c&&(o=!0);break;case"is-empty":c||(o=!0);break;case"has-value":var a=n.split(",");jQuery.each(a,(function(e,t){String(c)==String(t)&&(o=!0)}));break;case"has-not-value":c!=n&&(o=!0)}return o};e(ywccp_front.form_checkout_selector).on("change","input, select",(function(e){a(e)})),e(ywccp_front.form_checkout_selector).on("submit",(function(e){a(e)})),e(document.body).on("yith_wccp_i18n_locale_done",(function(e){a(e)}));var a=function(t){e(ywccp_front.form_checkout_selector).find("input, textarea, select, h3[data-name]").each((function(){var r=e(this).attr("name")||e(this).attr("data-name"),i=e(this).closest(".form-row").length?e(this).closest(".form-row"):e(this),n=function(e){var t=function(e){return jQuery.parseJSON(ywccp_front.conditions)[e]}(e);if(void 0===t||0===t.length)return null;for(var r=t.length,i={show:null,hide:null,set_required:null},n=0;n<r;n++){var c=t[n],a=o(c),d=c.action,s=c.required,l=c.wc_required;"products"!=c.input_name?"show"===d&&"no"!=i.show?a?(1==s&&(i.set_required="yes"),i.show="yes",i.hide="no"):(i.show="no",i.set_required="no",i.hide="yes"):"hide"===d&&"no"!=i.hide&&(a?(i.hide="yes",i.show="no"):(i.hide="no",i.show="yes")):(1==s||l)&&(i.set_required="yes",i.show="yes")}return i}(r),c=!1;null!=n&&("yes"==n.show?(i.show(),"yes"==n.set_required&&(c=!0)):"yes"==n.hide&&i.hide(),d(t.type,i,c))}))},d=function(e,t,r){1==r?(t.addClass("validate-required"),0==t.find("label").find("abbr.required").length&&(t.find("label").find(".optional").remove(),t.find("label").append('<abbr class="required" title="required">*</abbr>'))):(t.removeClass("validate-required woocommerce-validated woocommerce-invalid woocommerce-invalid-required-field"),0==t.find("label").find(".optional").length&&(t.find("label").append('<span class="optional">(optional)</span>'),t.find("abbr.required").remove()))};if(e(ywccp_front.form_checkout_selector).find("input, select").each((function(){var t=ywccp_front.field_ids_to_exclude,r=e(this).attr("id");e.isArray(t)&&e.inArray(r,t,0)<0&&e(this).trigger("change")})),ywccp_front.ship_different_address_old_behaviour){var s=e("#ship-to-different-address-checkbox").is(":checked");e(".woocommerce-shipping-fields__field-wrapper").hide(),e(document.body).on("init_checkout",(function(){e("#ship-to-different-address-checkbox").prop("checked",s).change(),e(".woocommerce-shipping-fields__field-wrapper").toggle(!0)}))}}));